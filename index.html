<!DOCTYPE html>
<html lang="fr" class="scroll-smooth">
<head>
  <meta charset="UTF-8">
  <title>PaieNet.fr ‚Äì Calculateur Salaire Brut en Net 2025 (Gratuit & Pr√©cis)</title>
  <meta name="description" content="Simulateur de salaire gratuit 2025. Calculez votre net √† payer, net imposable et co√ªt employeur. Inclus : Taux horaire, Statut Cadre, Fonction Publique et Alternance.">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="robots" content="index, follow">
  <meta name="referrer" content="strict-origin-when-cross-origin">
  
  <link rel="canonical" href="https://paienet.fr/">
  
  <!-- Balise de v√©rification Impact (Sans impact sur les performances) -->
  <meta name='impact-site-verification' value='f9e0061d-f671-474c-926d-b7a5e6352430'>

  <!-- GA4 (Analytics conserv√© car l√©ger et utile) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-053E5TJ1PX"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-053E5TJ1PX');
  </script>

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            slate: { 850: '#1e293b', 900: '#0f172a' }
          },
          fontFamily: {
            sans: ['Inter', 'sans-serif'],
          }
        }
      }
    }
  </script>

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

  <style>
    body { font-family: 'Inter', sans-serif; -webkit-font-smoothing: antialiased; }
    .fade-in { animation: fadeIn 0.4s ease-out forwards; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
    
    input[type=number]::-webkit-inner-spin-button, 
    input[type=number]::-webkit-outer-spin-button { -webkit-appearance: none; margin: 0; }
    input[type=number] { -moz-appearance: textfield; }

    .toggle-checkbox:checked { right: 0; border-color: #2563eb; }
    .toggle-checkbox:checked + .toggle-label { background-color: #2563eb; }

    .pie-chart { width: 100px; height: 100px; border-radius: 50%; position: relative; background: #e2e8f0; transition: background 0.3s; will-change: background; }
    .pie-chart::after { content: ""; position: absolute; inset: 12px; background: #f8fafc; border-radius: 50%; }
    .dark .pie-chart::after { background: #1e293b; }

    /* Input Result Editable Style */
    .input-result { background: transparent; border: 1px dashed transparent; width: 100%; transition: all 0.2s; cursor: text; }
    .input-result:hover { border-color: #cbd5e1; }
    .input-result:focus { outline: none; border-color: #2563eb; background: rgba(255,255,255,0.5); }
    .dark .input-result:focus { background: rgba(30, 41, 59, 0.5); }

    .pay-slip-row { display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px dashed #e2e8f0; font-size: 0.875rem; }
    .dark .pay-slip-row { border-bottom-color: #334155; }

    /* Modals System */
    .modal { display: none; position: fixed; inset: 0; z-index: 100; background: rgba(15, 23, 42, 0.5); backdrop-filter: blur(4px); align-items: center; justify-content: center; padding: 20px; }
    .modal.active { display: flex; animation: fadeIn 0.3s ease-out; }

    /* Expandable SEO */
    #seo-extra { display: none; }
    #seo-extra.expanded { display: block; }

    /* Ad Placeholders (Vides pour l'instant) */
    .ad-placeholder { 
      background: rgba(241, 245, 249, 0.5); 
      border: 1px dashed #cbd5e1; 
      display: flex; 
      align-items: center;
      justify-content: center;
      text-align: center; 
      color: #94a3b8; 
      font-size: 10px; 
      text-transform: uppercase; 
      letter-spacing: 1px; 
      min-height: 280px; 
      width: 100%; 
      border-radius: 8px; 
      margin: 20px 0; 
      overflow: hidden; 
    }
    .dark .ad-placeholder { background: rgba(30, 41, 59, 0.5); border-color: #334155; }

    /* Print Styles */
    #print-document { display: none; } 
    @media print {
      @page { margin: 0; size: A4; }
      body > *:not(#print-document) { display: none !important; }
      body { background: white !important; color: #1e293b !important; font-family: 'Inter', sans-serif; font-size: 11px; margin: 0; padding: 0; -webkit-print-color-adjust: exact; print-color-adjust: exact; }
      #print-document { display: block !important; position: absolute; top: 0; left: 0; width: 210mm; min-height: 297mm; padding: 15mm; box-sizing: border-box; background: white; z-index: 9999; }
      .pdf-watermark { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%) rotate(-45deg); font-size: 120px; font-weight: 900; color: #f1f5f9; z-index: -1; opacity: 0.5; }
      .pdf-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 40px; border-bottom: 2px solid #2563eb; padding-bottom: 20px; }
      .pdf-logo-text { font-size: 24px; font-weight: 800; color: #0f172a; letter-spacing: -1px; }
      .pdf-logo-accent { color: #2563eb; }
      .pdf-title { font-size: 16px; font-weight: bold; text-transform: uppercase; color: #2563eb; margin-bottom: 5px; }
      .pdf-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 40px; margin-bottom: 30px; }
      .pdf-box { background: #f8fafc !important; padding: 15px; border-radius: 6px; border: 1px solid #e2e8f0; }
      .pdf-box-label { font-size: 9px; text-transform: uppercase; letter-spacing: 0.5px; color: #64748b; margin-bottom: 5px; font-weight: 600; }
      .pdf-box-value { font-size: 12px; font-weight: 700; color: #0f172a; }
      .pdf-table { width: 100%; border-collapse: collapse; margin-bottom: 30px; }
      .pdf-table th { text-align: left; padding: 10px; background-color: #0f172a !important; color: white !important; font-weight: 600; font-size: 10px; text-transform: uppercase; }
      .pdf-table td { padding: 12px 10px; border-bottom: 1px solid #e2e8f0; font-size: 11px; }
      .col-right { text-align: right; }
      .pdf-total-box { width: 250px; background: #eff6ff !important; border: 1px solid #2563eb; border-radius: 6px; padding: 15px; }
      .pdf-total-row { display: flex; justify-content: space-between; margin-bottom: 8px; font-size: 11px; }
      .pdf-total-row.final { border-top: 1px dashed #2563eb; padding-top: 8px; margin-top: 8px; font-weight: 900; font-size: 16px; color: #1e3a8a; }
      .pdf-footer-section { display: flex; justify-content: space-between; align-items: center; border-top: 1px solid #e2e8f0; padding-top: 15px; margin-top: auto; }
      .pdf-legal { font-size: 8px; color: #94a3b8; max-width: 70%; line-height: 1.4; }
      .pdf-qr { width: 60px; height: 60px; background: #fff; border: 1px solid #ddd; padding: 2px; }
    }
  </style>
</head>

<body class="bg-slate-50 text-slate-800 flex flex-col min-h-screen transition-colors duration-300 dark:bg-slate-900 dark:text-slate-100 text-left">

  <!-- Header Design Riche -->
  <header class="bg-white border-b border-slate-200 sticky top-0 z-20 shadow-sm no-print dark:bg-slate-800 dark:border-slate-700">
    <div class="max-w-6xl mx-auto px-4 py-3 flex justify-between items-center text-left">
      <a href="index.html" class="flex items-center gap-2 group shrink-0">
        <div class="w-10 h-10 bg-gradient-to-br from-blue-600 to-blue-800 text-white rounded-xl shadow-lg flex items-center justify-center transform group-hover:rotate-3 transition-transform">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"></path></svg>
        </div>
        <div class="flex flex-col justify-center">
          <span class="text-xl font-bold text-slate-900 dark:text-white uppercase italic tracking-tight leading-none font-black text-left">Paie<span class="text-blue-600">Net</span></span>
          <span class="block text-[10px] font-semibold text-slate-400 uppercase tracking-widest mt-1 text-left">Salaire & Imp√¥ts</span>
        </div>
      </a>

      <!-- NAVIGATION HAUTE -->
      <nav class="flex items-center gap-2 sm:gap-4">
        <a href="freelance.html" class="flex items-center gap-1.5 px-3 py-2 bg-emerald-50 text-emerald-700 rounded-lg text-[10px] sm:text-xs font-bold uppercase tracking-tighter hover:bg-emerald-100 transition border border-emerald-100 dark:bg-emerald-900/20 dark:text-emerald-400 dark:border-emerald-800 group">
            <span class="hidden sm:inline group-hover:scale-110 transition-transform">üöÄ Mode</span> Ind√©pendant
        </a>
        <div class="h-6 w-px bg-slate-200 dark:bg-slate-700 hidden sm:block"></div>
        <button id="themeToggle" onclick="toggleTheme()" class="p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700 transition text-slate-500">
          <svg id="iconSun" class="w-5 h-5 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path></svg>
          <svg id="iconMoon" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path></svg>
        </button>
      </nav>
    </div>
  </header>

  <main class="max-w-6xl mx-auto px-4 py-8 md:py-10 flex-grow text-left">
    <div class="grid grid-cols-1 lg:grid-cols-12 gap-8 text-left items-start">
      
      <!-- CALCULATEUR (Colonne Gauche - 8/12) -->
      <div class="lg:col-span-8 space-y-6 text-left">
        <div id="main-container" class="bg-white rounded-2xl shadow-lg border border-slate-100 p-6 md:p-8 dark:bg-slate-800 dark:border-slate-700 transition-colors text-left">
          <div class="flex justify-between items-start mb-2 no-print text-left">
            <h1 class="text-2xl md:text-3xl font-bold text-slate-900 dark:text-white tracking-tight italic text-left">Convertisseur Brut <span class="text-blue-600">‚Üî</span> Net</h1>
            <div class="flex flex-col items-end gap-1">
               <span class="inline-flex items-center gap-1.5 px-2 py-0.5 rounded-md text-[9px] font-bold uppercase tracking-wider bg-emerald-50 text-emerald-700 border border-emerald-200 dark:bg-emerald-900/30 dark:text-emerald-300 dark:border-emerald-800">‚úÖ Taux 2025</span>
               <span id="shareMsg" class="hidden text-xs text-green-600 font-medium bg-green-50 dark:bg-green-900/30 px-2 py-1 rounded">Lien copi√© !</span>
            </div>
          </div>
          <p class="text-slate-500 mb-6 text-sm dark:text-slate-400 text-left text-left">Calculez instantan√©ment votre salaire Net 2025, imp√¥ts et co√ªt entreprise.</p>

          <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6 bg-slate-50 p-4 rounded-xl border border-slate-200 no-print dark:bg-slate-700/50 dark:border-slate-600 text-left">
            <div>
              <label class="block text-[10px] font-bold text-slate-500 uppercase mb-1.5 dark:text-slate-400 tracking-wider">Statut Contractuel</label>
              <select id="statut" class="w-full text-sm border-slate-300 rounded-lg p-2.5 bg-white focus:ring-2 focus:ring-blue-500 outline-none cursor-pointer border shadow-sm dark:bg-slate-800 dark:border-slate-600 dark:text-white">
                <option value="non_cadre" selected>üë§ Salari√© Non-Cadre</option>
                <option value="cadre">üëî Salari√© Cadre</option>
                <option value="public">üèõÔ∏è Fonction Publique</option>
                <option value="liberal">üíª Profession Lib√©rale</option>
                <option value="alternant">üéì Alternant (Charges sal. 2%)</option>
              </select>
            </div>
            <div class="flex flex-col justify-between gap-3 text-left">
              <div class="flex items-center justify-between text-left">
                <label class="text-sm font-medium text-slate-700 dark:text-slate-300">Prime 13√®me mois</label>
                <div class="relative inline-block w-10 mr-2 align-middle"><input type="checkbox" name="toggle" id="mois13" class="toggle-checkbox absolute block w-5 h-5 rounded-full bg-white border-4 appearance-none cursor-pointer border-slate-300 left-0 transition-all duration-200"/><label for="mois13" class="toggle-label block overflow-hidden h-5 rounded-full bg-slate-300 cursor-pointer"></label></div>
              </div>
              <div class="flex items-center gap-2">
                <label for="tauxImpot" class="text-sm font-medium text-slate-700 whitespace-nowrap dark:text-slate-300">Taux PAS (%) :</label>
                <input type="text" id="tauxImpot" placeholder="0" class="w-full p-1.5 text-sm border border-slate-300 rounded focus:ring-1 focus:ring-blue-500 outline-none text-right dark:bg-slate-800 dark:border-slate-600 dark:text-white">
              </div>
            </div>
          </div>

          <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8 text-left">
            <div class="relative group">
              <label class="block text-[10px] font-bold text-slate-500 uppercase mb-2 dark:text-slate-400 tracking-widest text-left">Salaire Brut Mensuel</label>
              <div class="relative">
                <input type="text" id="brutMensuel" placeholder="Ex: 2500" class="w-full pl-4 pr-10 py-3 rounded-lg border-2 border-slate-200 focus:border-blue-500 outline-none text-xl font-bold text-slate-800 shadow-sm dark:bg-slate-800 dark:border-slate-600 dark:text-white">
                <span class="absolute inset-y-0 right-0 pr-4 flex items-center text-slate-400 font-medium pointer-events-none">‚Ç¨</span>
              </div>
            </div>
            <div class="relative group">
              <label class="block text-[10px] font-bold text-slate-500 uppercase mb-2 dark:text-slate-400 tracking-widest text-left">Salaire Brut Annuel</label>
              <div class="relative text-left">
                <input type="text" id="brutAnnuel" placeholder="Ex: 30000" class="w-full pl-4 pr-10 py-3 rounded-lg border-2 border-slate-200 focus:border-blue-500 outline-none text-xl font-bold text-slate-800 shadow-sm dark:bg-slate-800 dark:border-slate-600 dark:text-white">
                <span class="absolute inset-y-0 right-0 pr-4 flex items-center text-slate-400 font-medium pointer-events-none">‚Ç¨</span>
              </div>
            </div>
          </div>

          <!-- R√âSULTATS -->
          <div id="result" class="hidden bg-slate-50 rounded-xl border border-slate-200 overflow-hidden shadow-inner relative dark:bg-slate-900/50 dark:border-slate-700 text-left">
            <div class="bg-slate-100 px-6 py-2 border-b border-slate-200 flex justify-between items-center dark:bg-slate-800 dark:border-slate-700">
              <span class="text-[10px] font-bold text-slate-400 uppercase tracking-widest text-left">Estimation des revenus r√©els</span>
              <span id="badgeStatut" class="px-2 py-0.5 rounded text-[10px] font-bold bg-white border border-slate-300 text-slate-500 dark:bg-slate-700 dark:border-slate-600 dark:text-slate-300 uppercase leading-none h-4 flex items-center justify-center font-bold">NON CADRE</span>
            </div>

            <div class="p-6 grid grid-cols-1 md:grid-cols-12 gap-6 text-left text-slate-900 dark:text-white">
              <div class="md:col-span-8 space-y-6 text-left">
                <div class="flex items-end justify-between border-b border-slate-200 pb-4 border-dashed dark:border-slate-700 relative text-left">
                  <div class="w-full text-left">
                    <span class="block text-blue-600 text-xs font-bold uppercase mb-1 dark:text-blue-400 tracking-widest text-left">Net √† payer (Avant Imp√¥t)</span>
                    <div class="relative flex items-center text-left">
                      <input type="text" id="netMensuel" class="input-result text-4xl font-extrabold text-blue-600 tracking-tight placeholder-blue-200 w-full p-0 pr-16" placeholder="0">
                      <span class="absolute right-0 top-1/2 -translate-y-1/2 text-sm text-slate-400 pointer-events-none font-medium">‚Ç¨ / mois</span>
                    </div>
                  </div>
                </div>
                <div id="smicTag" class="hidden inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800 dark:bg-indigo-900/50 dark:text-indigo-300 text-left">üöÄ <span id="smicMultiple" class="ml-1 font-bold"></span> x SMIC</div>

                <div class="grid grid-cols-2 gap-x-4 gap-y-6 mt-4 text-left">
                   <div>
                       <span class="block text-[10px] text-slate-400 uppercase font-bold mb-1 tracking-wider text-left">Net Annuel</span>
                       <div class="relative text-left">
                           <input type="text" id="netAnnuel" class="input-result text-lg font-bold text-slate-700 w-full p-0 border-0 focus:ring-0 dark:text-slate-200 text-left" placeholder="0">
                           <span class="absolute right-0 top-0 text-xs text-slate-400 pointer-events-none font-medium text-left">‚Ç¨</span>
                       </div>
                   </div>
                   <div><span class="block text-[10px] text-slate-400 uppercase font-bold mb-1 tracking-wider text-left text-left">Net Imposable</span><span class="text-lg font-bold text-slate-700 block leading-none dark:text-slate-200 text-left text-left text-left"><span id="netImposable">0</span> ‚Ç¨</span></div>
                   <div><span class="block text-[10px] text-slate-400 uppercase font-bold mb-1 tracking-wider text-red-500 font-black text-left text-left text-left">Retenues Sociales</span><span class="text-lg font-bold text-red-400 block leading-none tracking-tighter text-left text-left text-left text-left">- <span id="coutCharges">0</span> ‚Ç¨</span></div>
                   <div><span class="block text-[10px] text-slate-400 uppercase font-bold mb-1 tracking-wider italic text-left text-left text-left text-left text-left text-left">Co√ªt Global Entreprise</span><span class="text-lg font-bold text-slate-600 block leading-none dark:text-slate-400 italic tracking-tighter text-left text-left text-left text-left text-left text-left"><span id="coutEmployeur">0</span> ‚Ç¨</span></div>
                </div>

                <!-- Bloc Taux Horaire -->
                <div class="flex flex-wrap gap-4 mt-4 pt-4 border-t border-slate-200 dark:border-slate-700">
                    <div class="flex-1 min-w-[120px] bg-slate-100 rounded-lg p-3 dark:bg-slate-700/50">
                        <span class="block text-[9px] font-bold uppercase text-slate-500 dark:text-slate-400 mb-1">Taux Horaire Net</span>
                        <span class="block text-sm font-bold text-slate-700 dark:text-slate-200"><span id="tauxHoraireNet">0</span> ‚Ç¨/h</span>
                    </div>
                    <div class="flex-1 min-w-[120px] bg-slate-100 rounded-lg p-3 dark:bg-slate-700/50">
                        <span class="block text-[9px] font-bold uppercase text-slate-500 dark:text-slate-400 mb-1">Taux Horaire Brut</span>
                        <span class="block text-sm font-bold text-slate-700 dark:text-slate-200"><span id="tauxHoraireBrut">0</span> ‚Ç¨/h</span>
                    </div>
                </div>

                <div id="blocImpot" class="flex items-center justify-between bg-white p-3 rounded-lg border border-blue-100 shadow-sm hidden mt-4 dark:bg-slate-800 dark:border-slate-700 text-left text-left text-left">
                  <div class="flex items-center gap-2 text-left"><span class="w-2 h-2 rounded-full bg-green-500 animate-pulse no-print"></span><span class="text-sm font-semibold text-slate-700 dark:text-slate-200 uppercase tracking-widest text-[10px] text-left">Net APR√àS Imp√¥t</span></div>
                  <span class="text-xl font-bold text-green-600 dark:text-green-400 tracking-tight italic text-left text-left text-left text-left"><span id="netApresImpot">0</span> ‚Ç¨</span>
                </div>
              </div>

              <div class="md:col-span-4 flex flex-col justify-start border-l border-slate-200 pl-0 md:pl-6 pt-6 md:pt-0 border-t md:border-t-0 border-dashed dark:border-slate-700 text-center">
                <div id="chartPie" class="pie-chart shadow-sm mx-auto"></div>
                <div class="mt-4 w-full space-y-2 text-[10px] uppercase tracking-tighter font-bold text-left text-left text-left text-left text-left">
                  <div class="flex justify-between text-left text-left text-left text-left text-left"><span class="flex items-center gap-1.5 text-left text-left text-left text-left text-left text-left text-left text-left text-left"><span class="w-2 h-2 rounded-full bg-blue-600"></span><span class="text-slate-600 dark:text-slate-300 text-left text-left text-left">Salaire Net</span></span><span class="text-slate-700 dark:text-slate-200 text-left text-left" id="percentNet">--%</span></div>
                  <div class="flex justify-between text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left"><span class="flex items-center gap-1.5 text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left"><span class="w-2 h-2 rounded-full bg-slate-300 dark:bg-slate-600"></span><span class="text-slate-600 dark:text-slate-300 text-left text-left text-left text-left text-left">Cotisations</span></span><span class="text-slate-700 dark:text-slate-200 text-left text-left" id="percentCharges">--%</span></div>
                </div>

                <!-- R√©partition Visuelle des Cotisations -->
                <div class="mt-8 text-left w-full">
                    <h4 class="text-[9px] font-black uppercase text-slate-400 mb-3 tracking-widest border-b border-slate-100 pb-1 dark:border-slate-700">O√π vont vos cotisations ?</h4>
                    <div class="space-y-3">
                        <div>
                            <div class="flex justify-between text-[9px] font-bold text-slate-600 dark:text-slate-400 mb-1"><span>Retraite</span><span>~45%</span></div>
                            <div class="w-full bg-slate-100 rounded-full h-1.5 dark:bg-slate-700"><div class="bg-indigo-500 h-1.5 rounded-full" style="width: 45%"></div></div>
                        </div>
                        <div>
                            <div class="flex justify-between text-[9px] font-bold text-slate-600 dark:text-slate-400 mb-1"><span>Sant√© / Pr√©voyance</span><span>~25%</span></div>
                            <div class="w-full bg-slate-100 rounded-full h-1.5 dark:bg-slate-700"><div class="bg-emerald-500 h-1.5 rounded-full" style="width: 25%"></div></div>
                        </div>
                         <div>
                            <div class="flex justify-between text-[9px] font-bold text-slate-600 dark:text-slate-400 mb-1"><span>CSG / CRDS / Famille</span><span>~20%</span></div>
                            <div class="w-full bg-slate-100 rounded-full h-1.5 dark:bg-slate-700"><div class="bg-amber-500 h-1.5 rounded-full" style="width: 20%"></div></div>
                        </div>
                        <div>
                            <div class="flex justify-between text-[9px] font-bold text-slate-600 dark:text-slate-400 mb-1"><span>Ch√¥mage</span><span>~10%</span></div>
                            <div class="w-full bg-slate-100 rounded-full h-1.5 dark:bg-slate-700"><div class="bg-rose-500 h-1.5 rounded-full" style="width: 10%"></div></div>
                        </div>
                    </div>
                </div>
              </div>
            </div>

            <!-- MODULE BUDGET / RESTE A VIVRE (Opt-in) -->
            <div class="border-t border-slate-200 bg-slate-50 p-6 rounded-b-xl dark:bg-slate-800/50 dark:border-slate-700 transition-colors">
               <div class="flex justify-between items-center mb-4">
                  <div class="flex items-center gap-2">
                     <span class="text-xl">üè°</span>
                     <h3 class="text-sm font-bold text-slate-700 dark:text-slate-300 uppercase tracking-wide">Calculer mon Reste √† Vivre</h3>
                  </div>
                  <div class="relative inline-block w-10 mr-2 align-middle">
                     <input type="checkbox" id="toggleBudget" class="toggle-checkbox absolute block w-5 h-5 rounded-full bg-white border-4 appearance-none cursor-pointer border-slate-300 left-0 transition-all duration-200"/>
                     <label for="toggleBudget" class="toggle-label block overflow-hidden h-5 rounded-full bg-slate-300 cursor-pointer"></label>
                  </div>
               </div>
               
               <div id="budgetSection" class="hidden space-y-4 pt-2 border-t border-slate-200 dark:border-slate-700/50">
                  <div class="grid grid-cols-2 gap-4">
                     <div class="space-y-1">
                        <label class="text-[10px] font-bold text-slate-500 uppercase tracking-widest">Loyer / Cr√©dit</label>
                        <input type="text" id="expenseRent" placeholder="0" class="w-full p-2 text-sm border border-slate-300 rounded-lg focus:ring-1 focus:ring-blue-500 outline-none bg-white dark:bg-slate-700 dark:border-slate-600 dark:text-white">
                     </div>
                     <div class="space-y-1">
                        <label class="text-[10px] font-bold text-slate-500 uppercase tracking-widest">Factures & √ânergie</label>
                        <input type="text" id="expenseBills" placeholder="0" class="w-full p-2 text-sm border border-slate-300 rounded-lg focus:ring-1 focus:ring-blue-500 outline-none bg-white dark:bg-slate-700 dark:border-slate-600 dark:text-white">
                     </div>
                     <div class="space-y-1">
                        <label class="text-[10px] font-bold text-slate-500 uppercase tracking-widest">Alimentation</label>
                        <input type="text" id="expenseFood" placeholder="0" class="w-full p-2 text-sm border border-slate-300 rounded-lg focus:ring-1 focus:ring-blue-500 outline-none bg-white dark:bg-slate-700 dark:border-slate-600 dark:text-white">
                     </div>
                     <div class="space-y-1">
                        <label class="text-[10px] font-bold text-slate-500 uppercase tracking-widest">Transports</label>
                        <input type="text" id="expenseTransport" placeholder="0" class="w-full p-2 text-sm border border-slate-300 rounded-lg focus:ring-1 focus:ring-blue-500 outline-none bg-white dark:bg-slate-700 dark:border-slate-600 dark:text-white">
                     </div>
                     <div class="space-y-1">
                        <label class="text-[10px] font-bold text-slate-500 uppercase tracking-widest">Loisirs / Sorties</label>
                        <input type="text" id="expenseLeisure" placeholder="0" class="w-full p-2 text-sm border border-slate-300 rounded-lg focus:ring-1 focus:ring-blue-500 outline-none bg-white dark:bg-slate-700 dark:border-slate-600 dark:text-white">
                     </div>
                     <div class="space-y-1">
                        <label class="text-[10px] font-bold text-slate-500 uppercase tracking-widest">√âpargne / Projets</label>
                        <input type="text" id="expenseSavings" placeholder="0" class="w-full p-2 text-sm border border-slate-300 rounded-lg focus:ring-1 focus:ring-blue-500 outline-none bg-white dark:bg-slate-700 dark:border-slate-600 dark:text-white">
                     </div>
                     <div class="space-y-1 col-span-2">
                        <label class="text-[10px] font-bold text-slate-500 uppercase tracking-widest">Autres Charges</label>
                        <input type="text" id="expenseOther" placeholder="0" class="w-full p-2 text-sm border border-slate-300 rounded-lg focus:ring-1 focus:ring-blue-500 outline-none bg-white dark:bg-slate-700 dark:border-slate-600 dark:text-white">
                     </div>
                  </div>
                  
                  <!-- Jauge de Sant√© Financi√®re -->
                  <div class="mt-4">
                     <div class="flex justify-between items-end mb-1">
                        <span class="text-[9px] font-bold uppercase text-slate-500 dark:text-slate-400 tracking-widest">Taux d'Effort (Charges / Net)</span>
                        <span id="healthPercentage" class="text-xs font-bold text-slate-700 dark:text-slate-300">0%</span>
                     </div>
                     <div class="w-full bg-gray-200 rounded-full h-2.5 dark:bg-gray-700 overflow-hidden">
                        <div id="budgetBar" class="bg-emerald-500 h-2.5 rounded-full transition-all duration-500 ease-out" style="width: 0%"></div>
                     </div>
                  </div>
                  
                  <div class="bg-blue-50 rounded-xl p-4 flex justify-between items-center border border-blue-100 dark:bg-blue-900/20 dark:border-blue-800 mt-4">
                     <div class="flex flex-col">
                        <span class="text-[10px] font-bold text-blue-600 uppercase tracking-widest dark:text-blue-400">Reste √† Vivre Mensuel</span>
                        <span class="text-xs text-blue-400 dark:text-blue-500 mt-0.5">Apr√®s d√©duction des charges</span>
                     </div>
                     <span class="text-2xl font-black text-blue-700 dark:text-blue-300" id="resultRemaining">0 ‚Ç¨</span>
                  </div>
                  <p class="text-[9px] text-slate-400 italic text-center mt-2">üîí Vos donn√©es budg√©taires restent strictement sur votre appareil.</p>
               </div>
            </div>

            <details id="detailsCotisations" class="group border-t border-slate-200 bg-white dark:bg-slate-800 dark:border-slate-700 text-left text-left text-left text-left text-left text-left">
               <summary class="flex justify-between items-center p-4 cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-700/50 transition no-print text-left text-left">
                 <span class="font-semibold text-sm text-slate-700 flex items-center gap-2 dark:text-slate-300 italic text-left">D√©tail analytique (Fiche de Paie)</span>
                 <svg class="w-5 h-5 text-slate-400 group-open:rotate-180 transition-transform" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" /></svg>
               </summary>
               <div class="p-6 pt-2 text-left text-slate-900 dark:text-white text-left text-left text-left text-left">
                 <div class="space-y-0 text-sm">
                    <div class="pay-slip-row bg-slate-50/50 dark:bg-slate-700/30 font-medium text-left"><span class="pay-slip-label uppercase tracking-widest text-[10px] text-left">Salaire Brut Mensuel</span><span class="pay-slip-value font-black text-left" id="fpBrut">0 ‚Ç¨</span></div>
                    <div class="pay-slip-row text-xs text-left"><span class="pay-slip-label pl-4 dark:text-slate-400 tracking-tight italic text-left">Charges Salariales (Protection Sociale)</span><span class="pay-slip-value text-red-500 font-bold text-left" id="fpTotalCharges">- 0 ‚Ç¨</span></div>
                    <div class="pay-slip-row bg-blue-50/30 border-t-2 border-slate-100 mt-2 pt-2 dark:bg-blue-900/20 dark:border-slate-700 font-black text-left text-left text-left"><span class="pay-slip-label font-bold text-blue-900 dark:text-blue-300 uppercase tracking-tighter text-sm text-left">Salaire Net √† Payer</span><span class="pay-slip-value text-blue-600 text-lg dark:text-blue-400 font-black text-left" id="fpNet">0 ‚Ç¨</span></div>
                    <div class="pay-slip-row bg-slate-100/50 pt-2 pb-2 mt-2 dark:bg-slate-700/50 italic text-left text-left text-left text-left"><span class="pay-slip-label font-semibold italic text-xs text-left">Net Imposable (IR)</span><span class="pay-slip-value font-bold text-xs text-left" id="fpNetImposable">0 ‚Ç¨</span></div>
                    <div class="pay-slip-row mt-4 pt-4 border-t border-slate-200 dark:border-slate-700 text-left text-left text-left text-left text-left text-left text-left"><span class="pay-slip-label font-medium dark:text-slate-400 uppercase text-[10px] tracking-widest italic text-left">Co√ªt Global Entreprise</span><span class="pay-slip-value dark:text-slate-300 font-bold italic text-left" id="fpCoutEmployeur">0 ‚Ç¨</span></div>
                 </div>
                 <div class="mt-4 pt-2 text-center no-print flex flex-wrap gap-2 justify-center">
                   <button onclick="window.print()" class="text-xs font-bold text-slate-500 hover:text-blue-600 flex items-center justify-center gap-2 transition uppercase tracking-tighter border border-slate-200 px-6 py-2 rounded-xl hover:border-blue-400">üìÑ T√©l√©charger PDF</button>
                   <button onclick="exportCSV()" class="text-xs font-bold text-slate-500 hover:text-green-600 flex items-center justify-center gap-2 transition uppercase tracking-tighter border border-slate-200 px-6 py-2 rounded-xl hover:border-green-400">üìä Export Excel (CSV)</button>
                 </div>
               </div>
            </details>
            
            <div class="absolute top-4 right-4 flex gap-1 no-print">
              <button onclick="resetCalc()" class="p-2 text-slate-400 hover:text-red-500 transition bg-white/50 hover:bg-white rounded-lg dark:bg-slate-700" title="R√©initialiser"><svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" /></svg></button>
              <button onclick="copySummary()" class="p-2 text-slate-400 hover:text-blue-600 transition bg-white/50 hover:bg-white rounded-lg dark:bg-slate-700" title="Copier"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"></path></svg></button>
              <button onclick="copyLink()" class="p-2 text-slate-400 hover:text-blue-600 transition bg-white/50 hover:bg-white rounded-lg dark:bg-slate-700" title="Lien"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"></path></svg></button>
            </div>
          </div>
        </div>

        <!-- CONTENU SEO MASSIF (+600 mots) -->
        <div id="seo-content" class="no-print space-y-8 text-left text-left text-left text-left text-left text-left">
          <article class="prose prose-slate max-w-none bg-white p-8 rounded-3xl shadow-sm border border-slate-100 dark:bg-slate-800 dark:border-slate-700 dark:prose-invert text-left text-left text-left text-left">
            <h2 class="text-2xl font-black text-slate-900 dark:text-white tracking-tighter uppercase italic border-b-4 border-blue-600 pb-4 inline-block mb-6 text-left">Guide Strat√©gique : Salaire Brut en Net en 2025</h2>
            <p class="leading-relaxed text-slate-600 dark:text-slate-400 text-left text-left text-left text-left text-left">Ma√Ætriser la conversion pr√©cise entre le <strong>salaire brut et le salaire net</strong> est une comp√©tence financi√®re fondamentale en 2025. Que vous soyez en phase de recrutement, salari√© en poste ou alternant, disposer d'un simulateur de paie analytique est imp√©ratif pour anticiper votre reste √† vivre r√©el. PaieNet.fr a √©t√© con√ßu par des experts pour offrir une transparence totale sur les m√©canismes de pr√©l√®vements sociaux obligatoires en France.</p>
            
            <h3 class="text-lg font-bold mt-8 uppercase tracking-widest text-blue-600 text-xs border-l-4 border-blue-600 pl-4 mb-4 text-left text-left text-left">L'Importance du Salaire Brut</h3>
            <p class="text-sm leading-relaxed mb-4 text-slate-600 dark:text-slate-400 text-left text-left text-left text-left">Le salaire brut contractuel constitue la base de votre r√©mun√©ration avant tout pr√©l√®vement. Il sert de socle pour le calcul de vos droits sociaux : assurance ch√¥mage, retraite de base et compl√©mentaire, et indemnit√©s journali√®res. Lors de toute n√©gociation annuelle, le brut annuel doit √™tre votre unique r√©f√©rentiel de stabilit√©.</p>

            <div id="seo-extra">
               <h3 class="text-lg font-bold mt-8 uppercase tracking-widest text-blue-600 text-xs border-l-4 border-blue-600 pl-4 mb-4 italic text-left text-left text-left text-left text-left text-left">Pourquoi les charges varient selon votre statut ?</h3>
               <p class="text-sm leading-relaxed mb-4 text-slate-600 dark:text-slate-400 text-left text-left text-left text-left text-left text-left">En France, la structure des cotisations sociales d√©pend du contrat de travail. Pour un <strong>salari√© non-cadre</strong>, le taux de retenue salariale moyen est de 22%. Les <strong>cadres</strong>, de par leur affiliation √† des caisses de retraite compl√©mentaire (AGIRC-ARRCO) et de pr√©voyance plus protectrices, voient leur taux de charges monter √† environ 25% du brut.</p>

               <!-- AD PLACEHOLDER IN CONTENT (Vides) -->
               <div id="ad-seo-container" class="ad-placeholder no-print my-8" style="width: 100% !important; min-height: 90px !important;">
                 <!-- PAS DE PUB -->
               </div>

               <h3 class="text-lg font-bold mt-8 uppercase tracking-widest text-blue-600 text-xs border-l-4 border-blue-600 pl-4 mb-4 italic text-left text-left text-left text-left text-left text-left">Le Cas de l'Alternance et de l'Apprentissage</h3>
               <p class="text-sm leading-relaxed mb-4 text-slate-600 dark:text-slate-400 text-left text-left text-left text-left text-left text-left">L'alternance b√©n√©ficie d'un r√©gime d'exon√©ration salariale unique. Sous un plafond de r√©mun√©ration (fix√© √† 79% du SMIC), l'alternant est exon√©r√© de la majorit√© des cotisations sociales. Notre simulateur applique un taux ajust√© de <strong>2%</strong> calibr√© sur l'observation des bulletins de paie r√©els de 2025.</p>

               <h3 class="text-lg font-bold mt-8 uppercase tracking-widest text-blue-600 text-xs border-l-4 border-blue-600 pl-4 mb-4 italic text-left text-left text-left text-left text-left text-left">Anticiper le Pr√©l√®vement √† la Source (PAS)</h3>
               <p class="text-sm leading-relaxed mb-4 text-slate-600 dark:text-slate-400 text-left text-left text-left text-left text-left text-left">Depuis 2019, le salaire net √† payer ne correspond plus au virement final. L'imp√¥t sur le revenu est d√©duit √† la source sur la base du <strong>Net Imposable</strong>. Ce dernier est toujours sup√©rieur au net √† payer car il r√©int√®gre la CSG et la CRDS non d√©ductibles. Utiliser le champ d√©di√© √† votre taux PAS personnalis√© dans notre outil vous permet de conna√Ætre votre virement bancaire final au centime pr√®s.</p>

               <h3 class="text-lg font-bold mt-8 uppercase tracking-widest text-blue-600 text-xs border-l-4 border-blue-600 pl-4 mb-4 italic text-left text-left text-left text-left text-left text-left">Le Co√ªt Employeur : Argument de n√©gociation</h3>
               <p class="text-sm leading-relaxed mb-4 text-slate-600 dark:text-slate-400 text-left text-left text-left text-left text-left text-left">Pour une entreprise, l'investissement r√©el d√©passe largement le salaire brut. Les charges patronales s'ajoutent √† cette base (environ 42% du brut). Conna√Ætre ce "Super-Brut" est un argument de poids lors d'une n√©gociation : cela d√©montre votre compr√©hension des enjeux financiers de votre employeur.</p>
               
               <h3 class="text-lg font-bold mt-8 uppercase tracking-widest text-blue-600 text-xs border-l-4 border-blue-600 pl-4 mb-4 italic text-left text-left text-left text-left text-left text-left">Prime de 13√®me mois et r√©mun√©ration liss√©e</h3>
               <p class="text-sm leading-relaxed mb-4 text-slate-600 dark:text-slate-400 text-left text-left text-left text-left text-left text-left">Si votre contrat pr√©voit un 13√®me mois, il est crucial de lisser ce revenu sur l'ann√©e pour √©valuer votre capacit√© d'emprunt mensuelle. Notre simulateur offre une option d√©di√©e pour calculer ce lissage automatiquement.</p>
            </div>

            <button id="toggleSEO" onclick="expandSEO()" class="mt-8 text-blue-600 font-black text-xs uppercase tracking-widest hover:text-blue-700 flex items-center gap-2 group italic text-left text-left">Lire l'int√©gralit√© du guide expert ‚Üì</button>
          </article>

          <div id="seoGridContainer" class="bg-white rounded-2xl border border-slate-200 p-8 dark:bg-slate-800 dark:border-slate-700 text-left text-left text-left text-left">
            <h3 class="text-lg font-black text-slate-900 mb-6 dark:text-white uppercase text-xs tracking-widest border-b-2 border-slate-50 pb-2 italic text-left">Grille d'analyse comparative (<span id="gridStatut">Non Cadre</span>)</h3>
            <div class="overflow-x-auto text-left text-left">
              <table class="w-full text-left text-xs font-medium text-left text-left">
                <thead><tr><th class="p-3 uppercase tracking-tighter border-b text-left text-left">Brut Annuel</th><th class="p-3 uppercase tracking-tighter border-b text-left text-left">Brut Mensuel</th><th class="p-3 uppercase tracking-tighter border-b text-left text-left">Net Mensuel</th><th class="p-3 italic border-b text-left text-left">Imposable est.</th></tr></thead>
                <tbody id="salaryTableBody"></tbody>
              </table>
            </div>
          </div>
        </div>
      </div>

      <!-- SIDEBAR (Colonne Droite - 4/12) - STICKY & DESIGN RICHE -->
      <div class="lg:col-span-4 space-y-6 no-print text-left text-slate-800 dark:text-slate-100 italic sticky top-24">
        
        <!-- Bloc Pub (Vides) -->
        <div id="ad-top-container" class="ad-placeholder" style="width: 100% !important; min-height: 250px !important;">
           <!-- PAS DE PUB -->
        </div>

        <div class="relative overflow-hidden rounded-3xl bg-white border border-slate-100 shadow-lg dark:bg-slate-800 dark:border-slate-700 text-left">
          <div class="absolute top-0 left-0 w-full h-1.5 bg-gradient-to-r from-blue-500 via-indigo-500 to-purple-500"></div>
          <div class="p-6">
            <h3 class="text-[10px] font-bold text-slate-900 uppercase tracking-widest flex items-center gap-2 mb-6 dark:text-white italic">Outils Professionnels</h3>
            <div class="space-y-4">
              <a href="https://c3po.link/Q9Km6E7Z9a" target="_blank" rel="noopener noreferrer" class="group block p-4 rounded-2xl border border-slate-100 bg-gradient-to-br from-slate-50 to-white hover:from-cyan-50 transition-all dark:from-slate-700 dark:border-slate-600 shadow-sm">
                <div class="flex items-start gap-4">
                  <div class="bg-cyan-100 p-3 rounded-xl text-cyan-600 dark:bg-slate-600 shadow-inner font-black italic text-center">üìä</div>
                  <div><div class="font-bold text-slate-800 text-sm dark:text-slate-100 group-hover:text-blue-600 uppercase tracking-tighter italic">Compta & Fiscalit√©</div><div class="text-[10px] text-slate-500 mt-1 dark:text-slate-400 leading-tight italic">Automatisez vos revenus avec Indy (100% gratuit).</div></div>
                </div>
              </a>
              <a href="https://bour.so/p/RUhqIX1d2Cs" target="_blank" rel="noopener noreferrer" class="group block p-4 rounded-2xl border border-slate-100 bg-gradient-to-br from-slate-50 to-white hover:from-blue-50 transition-all dark:from-slate-700 dark:border-slate-600 shadow-sm">
                <div class="flex items-start gap-4">
                  <div class="bg-blue-100 p-3 rounded-xl text-blue-600 dark:bg-slate-600 shadow-inner font-black italic text-center">üè¶</div>
                  <div><div class="font-bold text-slate-800 text-sm dark:text-slate-100 group-hover:text-blue-600 uppercase tracking-tighter italic">Banque Mobile Pro</div><div class="text-[10px] text-slate-500 mt-1 dark:text-slate-400 leading-tight italic">Optimisez vos revenus. +150‚Ç¨ offerts ici.</div></div>
                </div>
              </a>
            </div>
          </div>
        </div>

        <div class="bg-white rounded-3xl shadow-sm border border-slate-100 p-6 dark:bg-slate-800 dark:border-slate-700">
          <h3 class="font-bold text-slate-900 mb-6 text-[10px] dark:text-white uppercase tracking-widest italic border-b pb-2">Questions Analytiques (FAQ)</h3>
          <div class="space-y-6 dark:text-slate-300">
             <details class="group text-sm"><summary class="cursor-pointer font-bold hover:text-blue-600 list-none flex justify-between tracking-tighter italic">Pourquoi le net imposable est-il plus √©lev√© ? <span class="group-open:rotate-180 transition-transform">‚ñº</span></summary><p class="text-slate-500 mt-3 text-[11px] leading-relaxed italic border-l-2 border-slate-100 dark:border-slate-700 pl-4">Il r√©int√®gre la part de CSG et CRDS dite non d√©ductible fiscalement. C'est le r√©f√©rentiel utilis√© par l'administration pour calculer votre imp√¥t.</p></details>
             <hr class="border-slate-100 dark:border-slate-700">
             <details class="group text-sm"><summary class="cursor-pointer font-bold hover:text-blue-600 list-none flex justify-between tracking-tighter italic">N√©gociation : Salaire Brut Annuel ? <span class="group-open:rotate-180 transition-transform">‚ñº</span></summary><p class="text-slate-500 mt-3 text-[11px] leading-relaxed italic border-l-2 border-slate-100 dark:border-slate-700 pl-4">Absolument. Le brut annuel est la seule base l√©gale mentionn√©e sur le contrat. Le mensuel peut varier selon le nombre de jours ouvr√©s ou les primes.</p></details>
             <hr class="border-slate-100 dark:border-slate-700">
             <details class="group text-sm"><summary class="cursor-pointer font-bold hover:text-blue-600 list-none flex justify-between tracking-tighter italic">Impact des Titres Restaurant ? <span class="group-open:rotate-180 transition-transform">‚ñº</span></summary><p class="text-slate-500 mt-3 text-[11px] leading-relaxed italic border-l-2 border-slate-100 dark:border-slate-700 pl-4">Votre net "virement" sera diminu√© de votre quote-part salariale (souvent 50% de la valeur faciale du titre).</p></details>
             <hr class="border-slate-100 dark:border-slate-700">
             <details class="group text-sm"><summary class="cursor-pointer font-bold hover:text-blue-600 list-none flex justify-between tracking-tighter italic">Stagiaires : Quel taux de charges ? <span class="group-open:rotate-180 transition-transform">‚ñº</span></summary><p class="text-slate-500 mt-3 text-[11px] leading-relaxed italic border-l-2 border-slate-100 dark:border-slate-700 pl-4">Sous le plafond de s√©curit√© sociale (4,35‚Ç¨/h en 2025), la gratification est exon√©r√©e. Le Brut est √©gal au Net.</p></details>
             <hr class="border-slate-100 dark:border-slate-700">
             <details class="group text-sm"><summary class="cursor-pointer font-bold hover:text-blue-600 list-none flex justify-between tracking-tighter italic">C'est quoi le Net Social ? <span class="group-open:rotate-180 transition-transform">‚ñº</span></summary><p class="text-slate-500 mt-3 text-[11px] leading-relaxed italic border-l-2 border-slate-100 dark:border-slate-700 pl-4">C'est le montant √† d√©clarer pour vos droits sociaux (CAF). Il figure obligatoirement sur votre bulletin de paie.</p></details>
             <hr class="border-slate-100 dark:border-slate-700">
             <details class="group text-sm"><summary class="cursor-pointer font-bold hover:text-blue-600 list-none flex justify-between tracking-tighter italic">Imp√¥t : Taux Personnalis√© ? <span class="group-open:rotate-180 transition-transform">‚ñº</span></summary><p class="text-slate-500 mt-3 text-[11px] leading-relaxed italic border-l-2 border-slate-100 dark:border-slate-700 pl-4">C'est le taux calcul√© selon vos revenus du foyer. Si vous ne le communiquez pas, votre employeur appliquera le taux par d√©faut.</p></details>
             <hr class="border-slate-100 dark:border-slate-700">
             <details class="group text-sm"><summary class="cursor-pointer font-bold hover:text-blue-600 list-none flex justify-between tracking-tighter italic">Mutuelle Obligatoire ? <span class="group-open:rotate-180 transition-transform">‚ñº</span></summary><p class="text-slate-500 mt-3 text-[11px] leading-relaxed italic border-l-2 border-slate-100 dark:border-slate-700 pl-4">La mutuelle collective est financ√©e √† 50% min. par l'employeur. Votre part est d√©duite de votre salaire net.</p></details>
             <hr class="border-slate-100 dark:border-slate-700">
             <details class="group text-sm"><summary class="cursor-pointer font-bold hover:text-blue-600 list-none flex justify-between tracking-tighter italic">Plafonds S√©curit√© Sociale ? <span class="group-open:rotate-180 transition-transform">‚ñº</span></summary><p class="text-slate-500 mt-3 text-[11px] leading-relaxed italic border-l-2 border-slate-100 dark:border-slate-700 pl-4">Le plafond (PMSS) sert de base au calcul de certaines cotisations. Il est r√©√©valu√© chaque ann√©e au 1er janvier.</p></details>
          </div>
        </div>

        <!-- Bloc Pub (Bas Sidebar) - VIDE -->
        <div id="ad-sidebar-container" class="ad-placeholder no-print" style="width: 100% !important; min-height: 250px !important;">
           <!-- PAS DE PUB -->
        </div>
      </div>
    </div>
  </main>

  <footer class="bg-white border-t border-slate-200 mt-auto py-10 no-print dark:bg-slate-800 dark:border-slate-700 text-center text-left">
    <div class="max-w-6xl mx-auto px-4 flex flex-wrap justify-center items-center gap-x-6 gap-y-4 text-[10px] text-slate-400 uppercase tracking-widest font-semibold italic text-center text-left">
        <span class="text-slate-900 dark:text-white font-black italic">¬© 2025 PaieNet.fr</span>
        <button onclick="openModal('modalMentions')" class="hover:text-blue-600 transition underline decoration-slate-200">Mentions L√©gales</button>
        <button onclick="openModal('modalPolitique')" class="hover:text-blue-600 transition underline decoration-slate-200">Confidentialit√©</button>
        <button onclick="openModal('modalContact')" class="hover:text-blue-600 transition underline decoration-slate-200 font-black">Contact</button>
        <a href="freelance.html" class="text-emerald-600 font-black hover:text-emerald-500 transition bg-emerald-50 dark:bg-emerald-900/20 px-4 py-2 rounded-xl border border-emerald-100 italic uppercase tracking-tighter shadow-sm">‚ûú Simulateur Auto-Entrepreneur</a>
    </div>
  </footer>

  <!-- MODALS EXPERT -->
  <div id="modalMentions" class="modal">
    <div class="bg-white dark:bg-slate-800 max-w-2xl w-full rounded-3xl p-10 shadow-2xl relative max-h-[85vh] overflow-y-auto border border-slate-200 dark:border-slate-700 text-left text-left text-left">
      <button onclick="closeModals()" class="absolute top-6 right-6 text-slate-400 hover:text-red-500 text-3xl font-light">&times;</button>
      <h2 class="text-2xl font-black mb-8 dark:text-white uppercase italic tracking-tighter border-b-4 border-blue-600 inline-block text-left italic">Mentions L√©gales</h2>
      <div class="space-y-6 text-xs text-slate-600 dark:text-slate-400 text-left leading-relaxed italic italic text-left">
        <p>En application de la loi n¬∞ 2004-575 du 21 juin 2004 (LCEN), les mentions suivantes r√©gissent l'usage du portail <strong>PaieNet.fr</strong> :</p>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 bg-slate-50 dark:bg-slate-900/50 p-8 rounded-3xl border border-slate-100 dark:border-slate-800 text-left text-left">
           <div><p class="font-bold uppercase text-[9px] text-slate-400 mb-1 tracking-widest italic text-left text-left">√âditeur & Propri√©t√©</p><p class="text-slate-900 dark:text-white font-black italic text-left text-left text-left">PaieNet</p></div>
           <div><p class="font-bold uppercase text-[9px] text-slate-400 mb-1 tracking-widest italic text-left text-left text-left">Responsable Publication</p><p class="text-slate-900 dark:text-white font-black italic text-left text-left text-left">Alain ‚Äì contact@paienet.fr</p></div>
           <div><p class="font-bold uppercase text-[9px] text-slate-400 mb-1 tracking-widest italic text-left text-left text-left">Ing√©nierie Web</p><p class="text-slate-900 dark:text-white font-black italic text-left text-left text-left">paienet.fr</p></div>
           <div><p class="font-bold uppercase text-[9px] text-slate-400 mb-1 tracking-widest italic text-left text-left text-left text-left">H√©bergement Infrastructure</p><p class="text-slate-900 dark:text-white font-black italic text-xs text-left text-left text-left text-left text-left">OVH SAS ‚Äì Si√®ge : 2 rue Kellermann, 59100 Roubaix, France.</p></div>
        </div>
      </div>
    </div>
  </div>

  <div id="modalPolitique" class="modal">
    <div class="bg-white dark:bg-slate-800 max-w-3xl w-full rounded-3xl p-12 shadow-2xl relative max-h-[85vh] overflow-y-auto border border-slate-200 dark:border-slate-700 text-left leading-relaxed italic italic text-left text-left text-left">
      <button onclick="closeModals()" class="absolute top-6 right-6 text-slate-400 hover:text-red-500 text-3xl font-light">&times;</button>
      <h2 class="text-2xl font-black mb-8 dark:text-white uppercase italic tracking-tighter border-b-4 border-blue-600 inline-block text-left text-left text-left">Politique de Confidentialit√©</h2>
      <div class="space-y-8 text-xs text-slate-600 dark:text-slate-400 text-left text-left">
        <p class="text-left text-left text-left">PaieNet.fr s'engage pour une transparence totale concernant le traitement des donn√©es, en conformit√© avec le RGPD.</p>
        <section class="text-left text-left"><h4 class="font-black text-slate-900 dark:text-white uppercase text-[9px] mb-3 border-l-4 border-blue-600 pl-4 tracking-widest italic text-left text-left text-left text-left">Art 1. Confidentialit√© des Simulations</h4><p class="text-left text-left text-left text-left">L'infrastructure technologique de <strong>PaieNet.fr</strong> garantit la neutralit√© des donn√©es. Les simulations de salaire sont ex√©cut√©es localement sur votre terminal. Aucune donn√©e financi√®re n'est transmise ou stock√©e par nos serveurs.</p></section>
        <section class="text-left text-left text-left text-left"><h4 class="font-black text-slate-900 dark:text-white uppercase text-[9px] mb-3 border-l-4 border-blue-600 pl-4 tracking-widest italic text-left text-left text-left text-left text-left">Art 2. R√©gie Publicitaire & Traceurs</h4><p class="text-left text-left text-left text-left text-left">Ce site collabore avec <strong>Google AdSense</strong>. Ce partenaire utilise des traceurs num√©riques (cookies) afin de proposer des contenus publicitaires adapt√©s au parcours de navigation pseudonymis√© de l'usager sur le r√©seau Google.</p></section>
        <section class="text-left text-left text-left text-left text-left text-left text-left text-left text-left text-left"><h4 class="font-black text-slate-900 dark:text-white uppercase text-[9px] mb-3 border-l-4 border-blue-600 pl-4 tracking-widest italic text-left text-left text-left text-left text-left text-left">Art 3. Statistiques & Performance</h4><p class="text-left text-left text-left text-left text-left text-left">Le service <strong>Google Analytics</strong> est d√©ploy√© afin d'analyser l'ergonomie et l'audience du site. Les adresses IP sont tronqu√©es afin d'assurer une mesure strictement statistique.</p></section>
      </div>
    </div>
  </div>

  <div id="modalContact" class="modal">
    <div class="bg-white dark:bg-slate-800 max-w-md w-full rounded-3xl p-12 shadow-2xl relative text-center border border-slate-100 dark:border-slate-700 text-center text-center text-center">
      <button onclick="closeModals()" class="absolute top-6 right-6 text-slate-400 hover:text-red-500 text-3xl font-light">&times;</button>
      <div class="text-6xl mb-6 italic text-center text-center text-center text-center">üì©</div>
      <h2 class="text-2xl font-black mb-2 dark:text-white uppercase italic tracking-tighter text-center text-center text-center">Direction PaieNet</h2>
      <p class="text-slate-500 text-[10px] mb-8 dark:text-slate-400 leading-tight italic uppercase tracking-widest border-b pb-2 inline-block text-center italic text-center italic text-center italic">Expertise et Partenariats</p>
      <a href="mailto:contact@paienet.fr" class="text-2xl font-black text-blue-600 hover:underline tracking-tighter block mt-4 italic text-center text-center text-center">contact@paienet.fr</a>
    </div>
  </div>

  <!-- SCRIPT LOGIC -->
  <script>
    // PAS DE SCRIPT ADSENSE = PAS DE RALENTISSEMENT

    const RATES = { non_cadre: 0.22, cadre: 0.25, public: 0.15, liberal: 0.45, alternant: 0.02 }; 
    const EMPLOYER_RATES = { non_cadre: 0.42, cadre: 0.45, public: 0.45, liberal: 0, alternant: 0.05 }; 
    const SMIC_NET_2025 = 1426; 
    const CSG_NON_DED_RATE = 0.029; 

    // Global variable for elements, populated on DOMContentLoaded
    let el = {};
    let adSeoInitialized = false;
    let initialised = false;

    document.addEventListener('DOMContentLoaded', () => {
      // 1. Initialize DOM elements securely
      el = {
          brutMensuel: document.getElementById('brutMensuel'),
          brutAnnuel: document.getElementById('brutAnnuel'),
          netMensuel: document.getElementById('netMensuel'),
          netAnnuel: document.getElementById('netAnnuel'), 
          statut: document.getElementById('statut'),
          mois13: document.getElementById('mois13'),
          tauxImpot: document.getElementById('tauxImpot'),
          result: document.getElementById('result'),
          netApresImpot: document.getElementById('netApresImpot'),
          netImposable: document.getElementById('netImposable'),
          coutCharges: document.getElementById('coutCharges'),
          coutEmployeur: document.getElementById('coutEmployeur'),
          badgeStatut: document.getElementById('badgeStatut'),
          blocImpot: document.getElementById('blocImpot'),
          chartPie: document.getElementById('chartPie'),
          percentNet: document.getElementById('percentNet'),
          percentCharges: document.getElementById('percentCharges'),
          salaryTableBody: document.getElementById('salaryTableBody'),
          gridStatut: document.getElementById('gridStatut'),
          smicTag: document.getElementById('smicTag'),
          smicMultiple: document.getElementById('smicMultiple'),
          // Budget module elements
          toggleBudget: document.getElementById('toggleBudget'),
          budgetSection: document.getElementById('budgetSection'),
          expenseRent: document.getElementById('expenseRent'),
          expenseBills: document.getElementById('expenseBills'),
          expenseFood: document.getElementById('expenseFood'),
          expenseTransport: document.getElementById('expenseTransport'),
          expenseLeisure: document.getElementById('expenseLeisure'),
          expenseSavings: document.getElementById('expenseSavings'),
          expenseOther: document.getElementById('expenseOther'),
          resultRemaining: document.getElementById('resultRemaining'),
          // Hourly rate elements
          tauxHoraireNet: document.getElementById('tauxHoraireNet'),
          tauxHoraireBrut: document.getElementById('tauxHoraireBrut')
      };

      // 2. INPUT PROTECTION (NO CHARACTERS)
      const numericInputs = ['brutMensuel','brutAnnuel','tauxImpot', 'netMensuel', 'netAnnuel', 'expenseRent', 'expenseBills', 'expenseFood', 'expenseTransport', 'expenseLeisure', 'expenseSavings', 'expenseOther'];
      
      numericInputs.forEach(id => {
          const element = document.getElementById(id);
          if(element) {
              // Block non-numeric keys
              element.addEventListener('keydown', (e) => {
                  const allowedKeys = ['Backspace', 'Delete', 'Tab', 'Escape', 'Enter', 'ArrowLeft', 'ArrowRight', 'ArrowUp', 'ArrowDown', '.', ','];
                  if (allowedKeys.includes(e.key) || (e.ctrlKey === true || e.metaKey === true) || /^[0-9]$/.test(e.key)) {
                      return;
                  }
                  e.preventDefault();
              });
              // Clean on input (paste)
              element.addEventListener('input', (e) => {
                  e.target.value = e.target.value.replace(/[^0-9.,]/g, '').replace(/(\..*?)\..*/g, '$1').replace(/(,.*?)\,/g, '$1');
              });
          }
      });

      // 3. Secure local storage access
      try {
        if (localStorage.getItem('color-theme') === 'dark' || (!('color-theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
          document.documentElement.classList.add('dark');
          toggleIcons(true);
        }
      } catch (e) {
        console.warn('LocalStorage access denied', e);
      }

      loadFromUrl();
      if(!initialised) generateGrid();
      initialised = true;

      // ADD listeners for all input fields including net values
      ['brutMensuel','brutAnnuel','tauxImpot', 'netMensuel', 'netAnnuel'].forEach(id => {
         const element = document.getElementById(id);
         if(element) element.addEventListener('input', () => compute(id));
      });
      el.statut?.addEventListener('change', () => compute('option'));
      el.mois13?.addEventListener('change', () => compute('option'));

      // Budget Listeners
      el.toggleBudget?.addEventListener('change', () => {
          el.budgetSection.classList.toggle('hidden', !el.toggleBudget.checked);
          compute('budget'); // Recalculate layout/data
      });
      ['expenseRent', 'expenseBills', 'expenseFood', 'expenseTransport', 'expenseLeisure', 'expenseSavings', 'expenseOther'].forEach(id => {
          const element = document.getElementById(id);
          if(element) element.addEventListener('input', () => compute('budget'));
      });
    });

    const safeParseFloat = (val) => {
        if (!val) return 0;
        if (typeof val === 'number') return val;
        // Clean spaces (like in "2 500") and handle comma
        return parseFloat(val.replace(/\s/g, '').replace(',', '.')) || 0;
    };

    const compute = (source) => {
      // Safety check: ensure 'el' is populated
      if(!el.brutMensuel) return;

      const nbMois = el.mois13.checked ? 13 : 12;
      const tS = RATES[el.statut.value] || 0.22;
      const tP = EMPLOYER_RATES[el.statut.value] || 0;
      const tI = Math.min(100, Math.max(0, parseFloat(el.tauxImpot.value) || 0));
      let mG = 0; // Mensuel Brut Global

      // Determine base gross monthly based on source
      if (source === 'brutMensuel') {
          mG = safeParseFloat(el.brutMensuel.value);
      } else if (source === 'brutAnnuel') {
          mG = safeParseFloat(el.brutAnnuel.value) / nbMois;
      } else if (source === 'netMensuel') {
          // Reverse calculation: Brut = Net / (1 - rate)
          const mN_input = safeParseFloat(el.netMensuel.value);
          mG = mN_input / (1 - tS);
      } else if (source === 'netAnnuel') {
          // Reverse calculation from annual net
          const mN_ann_input = safeParseFloat(el.netAnnuel.value);
          mG = (mN_ann_input / nbMois) / (1 - tS);
      } else if (source === 'budget') {
          // Don't change base salary, just update budget
          mG = safeParseFloat(el.brutMensuel.value); 
      } else {
          // Default fall-back (options changed)
          mG = safeParseFloat(el.brutMensuel.value);
      }

      if (source !== 'budget' && (!mG || isNaN(mG) || mG === Infinity)) return;

      const mN = mG * (1 - tS);
      const cS = mG - mN;
      const cT = mG * (1 + tP); 
      const csgN = mG * 0.9825 * CSG_NON_DED_RATE;
      const mI = mN + csgN;
      const iM = (mI * (tI / 100));
      const mNA = mN - iM;

      // Hourly rates calculation (Standard 35h = 151.67h/month)
      const hN = mN / 151.67;
      const hB = mG / 151.67;

      // Update fields ONLY if they are NOT the active element to prevent cursor jumping
      const activeId = document.activeElement ? document.activeElement.id : null;

      if (activeId !== 'brutMensuel' && el.brutMensuel) el.brutMensuel.value = Math.round(mG);
      if (activeId !== 'brutAnnuel' && el.brutAnnuel) el.brutAnnuel.value = Math.round(mG * nbMois);
      
      // For text inputs (Net), use locale string for display
      if (activeId !== 'netMensuel' && el.netMensuel) el.netMensuel.value = Math.round(mN).toLocaleString('fr-FR');
      if (activeId !== 'netAnnuel' && el.netAnnuel) el.netAnnuel.value = Math.round(mN * nbMois).toLocaleString('fr-FR');

      // MAIN UI UPDATES
      if(el.netImposable) el.netImposable.textContent = Math.round(mI).toLocaleString('fr-FR');
      if(el.coutCharges) el.coutCharges.textContent = Math.round(cS).toLocaleString('fr-FR');
      if(el.coutEmployeur) el.coutEmployeur.textContent = Math.round(cT).toLocaleString('fr-FR');
      
      // Hourly Rates UI
      if(el.tauxHoraireNet) el.tauxHoraireNet.textContent = hN.toFixed(2).replace('.', ',');
      if(el.tauxHoraireBrut) el.tauxHoraireBrut.textContent = hB.toFixed(2).replace('.', ',');
      
      const nP = ((1 - tS) * 100).toFixed(0);
      if(el.percentNet) el.percentNet.textContent = `${nP}%`;
      if(el.percentCharges) el.percentCharges.textContent = `${100 - nP}%`;
      if(el.chartPie) el.chartPie.style.background = `conic-gradient(#2563eb 0% ${nP}%, #e2e8f0 ${nP}% 100%)`;

      if (tI > 0) {
        if(el.blocImpot) el.blocImpot.classList.remove('hidden');
        if(el.netApresImpot) el.netApresImpot.textContent = Math.round(mNA).toLocaleString('fr-FR');
      } else { 
        if(el.blocImpot) el.blocImpot.classList.add('hidden'); 
      }

      if(mN > 0) {
        if(el.smicMultiple) el.smicMultiple.textContent = (mN / SMIC_NET_2025).toFixed(1);
        if(el.smicTag) el.smicTag.classList.remove('hidden');
      }

      // DETAILS PANEL UPDATES
      const updateText = (id, val) => { const e = document.getElementById(id); if(e) e.textContent = val; };
      updateText('fpBrut', Math.round(mG).toLocaleString('fr-FR') + ' ‚Ç¨');
      updateText('fpTotalCharges', '- ' + Math.round(cS).toLocaleString('fr-FR') + ' ‚Ç¨');
      updateText('fpNet', Math.round(mN).toLocaleString('fr-FR') + ' ‚Ç¨');
      updateText('fpNetImposable', Math.round(mI).toLocaleString('fr-FR') + ' ‚Ç¨');
      updateText('fpCoutEmployeur', Math.round(cT).toLocaleString('fr-FR') + ' ‚Ç¨');

      // BUDGET MODULE UPDATE
      if(el.toggleBudget && el.toggleBudget.checked) {
          const rent = safeParseFloat(el.expenseRent ? el.expenseRent.value : 0);
          const bills = safeParseFloat(el.expenseBills ? el.expenseBills.value : 0);
          const food = safeParseFloat(el.expenseFood ? el.expenseFood.value : 0);
          const trans = safeParseFloat(el.expenseTransport ? el.expenseTransport.value : 0);
          const leisure = safeParseFloat(el.expenseLeisure ? el.expenseLeisure.value : 0);
          const savings = safeParseFloat(el.expenseSavings ? el.expenseSavings.value : 0);
          const other = safeParseFloat(el.expenseOther ? el.expenseOther.value : 0);
          
          const totalExpenses = rent + bills + food + trans + leisure + savings + other;
          const remaining = mNA - totalExpenses;
          
          // Update Remaining text
          if(el.resultRemaining) {
              el.resultRemaining.textContent = Math.round(remaining).toLocaleString('fr-FR') + ' ‚Ç¨';
              
              if(remaining < 0) el.resultRemaining.classList.replace('text-blue-700', 'text-red-600');
              else el.resultRemaining.classList.replace('text-red-600', 'text-blue-700');
          }

          // Update Health Bar
          const ratio = mNA > 0 ? (totalExpenses / mNA) * 100 : 0;
          const healthBar = document.getElementById('budgetBar');
          const healthText = document.getElementById('healthPercentage');
          
          if(healthBar && healthText) {
              healthBar.style.width = Math.min(ratio, 100) + '%';
              healthText.textContent = ratio.toFixed(0) + '%';
              
              // Color logic
              healthBar.className = "h-2.5 rounded-full transition-all duration-500 ease-out"; // Reset base classes
              if(ratio < 33) {
                 healthBar.classList.add('bg-emerald-500'); // Green
              } else if(ratio < 50) {
                 healthBar.classList.add('bg-amber-500'); // Orange
              } else {
                 healthBar.classList.add('bg-red-500'); // Red
              }
          }
      }

      // PDF UPDATES
      const updatePdf = (id, val) => { const e = document.getElementById(id); if(e) e.textContent = val; };
      updatePdf('pdfBrut', Math.round(mG).toLocaleString('fr-FR') + ' ‚Ç¨');
      updatePdf('pdfBrutTable', Math.round(mG).toLocaleString('fr-FR') + ' ‚Ç¨');
      updatePdf('pdfCharges', '- ' + Math.round(cS).toLocaleString('fr-FR') + ' ‚Ç¨');
      updatePdf('pdfTableTauxCharges', '~' + (tS*100).toFixed(0) + '%');
      updatePdf('pdfImposable', Math.round(mI).toLocaleString('fr-FR') + ' ‚Ç¨');
      updatePdf('pdfNetAvant', Math.round(mN).toLocaleString('fr-FR') + ' ‚Ç¨');
      updatePdf('pdfMontantPas', '- ' + Math.round(iM).toLocaleString('fr-FR') + ' ‚Ç¨');
      updatePdf('pdfCoutPatronal', Math.round(cT).toLocaleString('fr-FR') + ' ‚Ç¨');
      updatePdf('pdfNetApres', Math.round(mNA).toLocaleString('fr-FR') + ' ‚Ç¨');
      
      if(document.getElementById('pdfStatut') && el.statut) {
          const statLabels = { non_cadre: "Salari√© Non-Cadre", cadre: "Salari√© Cadre", public: "Fonction Publique", liberal: "Profession Lib√©rale", alternant: "Alternant / Apprenti" };
          document.getElementById('pdfStatut').textContent = statLabels[el.statut.value].toUpperCase();
      }
      
      const d = new Date();
      updatePdf('pdfDate', d.toLocaleDateString('fr-FR'));
      updatePdf('pdfPrintDate', d.toLocaleString('fr-FR'));
      if(document.getElementById('pdfRef')) document.getElementById('pdfRef').textContent = 'SAL-2025-' + Math.floor(Math.random()*1000);

      if(el.result) el.result.classList.remove('hidden');
      updateUrl(mG, el.statut ? el.statut.value : 'non_cadre', nbMois === 13, tI);
      // saveState(); // D√âSACTIV√â POUR CONFIDENTIALIT√â TOTALE
      if(source === 'option') generateGrid();
    };

    const generateGrid = () => {
      if(!el.statut) return;
      const lv = [1801.8, 2000, 2500, 3000, 3500, 4000, 5000]; 
      const tS = RATES[el.statut.value] || 0.22;
      let h = '';
      for(let b of lv) {
        const n = b * (1 - tS);
        const i = n + (b * 0.9825 * CSG_NON_DED_RATE);
        h += `<tr><td class="p-3 border-b">${(b*12).toLocaleString('fr-FR')} ‚Ç¨</td><td class="p-3 border-b">${b.toLocaleString('fr-FR')} ‚Ç¨</td><td class="p-3 border-b font-black text-blue-600">${Math.round(n).toLocaleString('fr-FR')} ‚Ç¨</td><td class="p-3 border-b italic">${Math.round(i).toLocaleString('fr-FR')} ‚Ç¨</td></tr>`;
      }
      if(el.salaryTableBody) el.salaryTableBody.innerHTML = h;
      const gridStatut = document.getElementById('gridStatut'); 
      if(gridStatut && el.statut) gridStatut.textContent = el.statut.options[el.statut.selectedIndex].text;
    };

    const updateUrl = (g, s, m, t) => {
      const p = new URLSearchParams();
      if(g && !isNaN(g)) p.set('b', Math.round(g));
      if(s !== 'non_cadre') p.set('s', s);
      if(m) p.set('m', '13');
      if(t > 0) p.set('t', Math.round(t));
      
      // Protected History Update
      try {
        window.history.replaceState({}, '', `${window.location.pathname}?${p.toString()}`);
      } catch(e) {
        console.warn('History update failed (sandboxed iframe?)', e);
      }
    };

    // FONCTION DE SAUVEGARDE (D√âSACTIV√âE)
    const saveState = () => {
        // try {
        //     const data = { ... };
        //     sessionStorage.setItem('paienet_last_sim', JSON.stringify(data));
        // } catch(e) { /* silent fail for iframes */ }
    };

    const loadFromUrl = () => {
      const p = new URLSearchParams(window.location.search);
      const b = p.get('b');
      
      // 1. Try URL first
      if(b && !isNaN(parseFloat(b)) && el.brutMensuel) {
        el.brutMensuel.value = Math.round(parseFloat(b));
        if(p.get('s') && el.statut) el.statut.value = p.get('s');
        if(p.get('m') && el.mois13) el.mois13.checked = true;
        if(p.get('t') && el.tauxImpot) el.tauxImpot.value = Math.round(parseFloat(p.get('t')));
        compute('option');
      } 
      // 2. SessionStorage (D√âSACTIV√â AUSSI POUR ETRE SUR)
      /*
      else {
          try {
              const saved = sessionStorage.getItem('paienet_last_sim');
              // ... code de chargement supprim√© pour garantir le nettoyage
          } catch(e) {}
      }
      */
    };

    // --- Helper Copier-Coller S√©curis√© ---
    function copyToClipboard(text, callback) {
        if (navigator.clipboard && navigator.clipboard.writeText) {
            navigator.clipboard.writeText(text).then(callback).catch(() => {
                fallbackCopy(text, callback);
            });
        } else {
            fallbackCopy(text, callback);
        }
    }

    function fallbackCopy(text, callback) {
        const textArea = document.createElement("textarea");
        textArea.value = text;
        textArea.style.position = "fixed"; 
        textArea.style.opacity = "0";
        document.body.appendChild(textArea);
        textArea.focus();
        textArea.select();
        try {
            document.execCommand('copy');
            if(callback) callback();
        } catch (err) {
            console.warn('Copy failed', err);
        }
        document.body.removeChild(textArea);
    }

    // --- Fonctions d'Interface ---
    window.resetCalc = () => {
      if(el.brutMensuel) el.brutMensuel.value = '';
      if(el.brutAnnuel) el.brutAnnuel.value = '';
      if(el.netMensuel) el.netMensuel.value = '';
      if(el.netAnnuel) el.netAnnuel.value = '';
      if(el.result) el.result.classList.add('hidden');
      try { sessionStorage.removeItem('paienet_last_sim'); } catch(e){}
      updateUrl();
    };

    window.copyLink = () => {
      copyToClipboard(window.location.href, () => {
        const msg = document.getElementById('shareMsg');
        if(msg) {
            msg.textContent = "Lien copi√© !";
            msg.classList.remove('hidden');
            setTimeout(() => msg.classList.add('hidden'), 2000);
        }
      });
    };

    window.copySummary = () => {
       const txt = `Salaire Brut: ${el.brutMensuel ? el.brutMensuel.value : ''}‚Ç¨\nNet avant imp√¥t: ${el.netMensuel ? el.netMensuel.value : ''}‚Ç¨\nCo√ªt Employeur: ${el.coutEmployeur ? el.coutEmployeur.textContent : ''}‚Ç¨\nSimul√© sur PaieNet.fr`;
       copyToClipboard(txt, () => {
          const msg = document.getElementById('shareMsg');
          if(msg) {
              msg.textContent = "R√©sum√© copi√© !";
              msg.classList.remove('hidden');
              setTimeout(() => msg.classList.add('hidden'), 2000);
          }
       });
    };

    // CSV EXPORT FUNCTION
    window.exportCSV = () => {
        const safeVal = (e) => e ? e.value : '';
        const safeText = (id) => { const e = document.getElementById(id); return e ? e.textContent : ''; };
        
        const rows = [
            ["Libelle", "Montant"],
            ["Salaire Brut Mensuel", safeVal(el.brutMensuel) + " ‚Ç¨"],
            ["Salaire Net Mensuel", safeVal(el.netMensuel) + " ‚Ç¨"],
            ["Net Imposable", safeText('netImposable')],
            ["Cout Total Employeur", safeText('coutEmployeur')],
            ["Taux Horaire Net", safeText('tauxHoraireNet')],
            ["Reste a Vivre", safeText('resultRemaining')],
            ["Date Simulation", new Date().toLocaleDateString()]
        ];
        
        let csvContent = "data:text/csv;charset=utf-8," 
            + rows.map(e => e.join(";")).join("\n");
            
        const encodedUri = encodeURI(csvContent);
        const link = document.createElement("a");
        link.setAttribute("href", encodedUri);
        link.setAttribute("download", "simulation_salaire_paienet.csv");
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
    };

    window.toggleTheme = () => {
      const isDark = document.documentElement.classList.toggle('dark');
      try { localStorage.setItem('color-theme', isDark ? 'dark' : 'light'); } catch(e) {}
      toggleIcons(isDark);
    };
    function toggleIcons(isD) {
      const sun = document.getElementById('iconSun');
      const moon = document.getElementById('iconMoon');
      if(sun) sun.classList.toggle('hidden', !isD);
      if(moon) moon.classList.toggle('hidden', isD);
    }

    window.openModal = (id) => { document.getElementById(id).classList.add('active'); document.body.style.overflow = 'hidden'; };
    window.closeModals = () => { document.querySelectorAll('.modal').forEach(m => m.classList.remove('active')); document.body.style.overflow = ''; };
    
    window.expandSEO = () => {
       const extra = document.getElementById('seo-extra');
       const btn = document.getElementById('toggleSEO');
       const expanded = extra.classList.toggle('expanded');
       btn.textContent = expanded ? "R√©duire le guide ‚Üë" : "Lire l'int√©gralit√© du guide expert ‚Üì";
    };
  </script>
</body>
</html>
